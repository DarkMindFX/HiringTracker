DECLARE @FirstName AS NVARCHAR(50) = '[Test {7DE3B9014362458C8709B8D1DD3D8EBA}] First_U'
DECLARE @MiddleName AS NVARCHAR(50) = '[Test {7DE3B9014362458C8709B8D1DD3D8EBA}] Middle_U'
DECLARE @LastName AS NVARCHAR(50) = '[Test {7DE3B9014362458C8709B8D1DD3D8EBA}] Last_U'
DECLARE @Email AS NVARCHAR(50) = 'test_7DE3B9014362458C8709B8D1DD3D8EBA@email.com'
DECLARE @Phone AS NVARCHAR(50) = '+7DE3B9014362458C8709B8D1DD3D8EBA_U'
DECLARE @CVLink AS NVARCHAR(1000) = 'http://www.dropbox.com/cvs/test_7DE3B9014362458C8709B8D1DD3D8EBA_U.pdf'

DECLARE @Fail AS BIT = 0

IF(NOT EXISTS(SELECT 1 FROM dbo.Candidate 
		WHERE 
			@FirstName = FirstName AND
			@MiddleName = MiddleName AND
			@LastName = LastName AND
			@Phone = Phone AND
			@CVLink = CVLink))
BEGIN
	SET @Fail = 1
END

DELETE FROM dbo.Candidate WHERE Email = @Email


IF(@Fail = 1)
BEGIN
	THROW 51001, 'TEST FAILED: Candidate was not updated', 1
END